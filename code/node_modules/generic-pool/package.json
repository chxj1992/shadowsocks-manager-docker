{
  "_args": [
    [
      {
        "raw": "generic-pool@^2.4.2",
        "scope": null,
        "escapedName": "generic-pool",
        "name": "generic-pool",
        "rawSpec": "^2.4.2",
        "spec": ">=2.4.2 <3.0.0",
        "type": "range"
      },
      "/root/.nvm/versions/node/v7.10.0/lib/node_modules/shadowsocks-manager/node_modules/knex"
    ]
  ],
  "_from": "generic-pool@>=2.4.2 <3.0.0",
  "_id": "generic-pool@2.5.4",
  "_inCache": true,
  "_location": "/shadowsocks-manager/generic-pool",
  "_nodeVersion": "6.9.1",
  "_npmOperationalInternal": {
    "host": "packages-12-west.internal.npmjs.com",
    "tmp": "tmp/generic-pool-2.5.4.tgz_1484997475602_0.3891984592191875"
  },
  "_npmUser": {
    "name": "sandfox",
    "email": "james.butler@sandfox.co.uk"
  },
  "_npmVersion": "3.10.8",
  "_phantomChildren": {},
  "_requested": {
    "raw": "generic-pool@^2.4.2",
    "scope": null,
    "escapedName": "generic-pool",
    "name": "generic-pool",
    "rawSpec": "^2.4.2",
    "spec": ">=2.4.2 <3.0.0",
    "type": "range"
  },
  "_requiredBy": [
    "/shadowsocks-manager/knex"
  ],
  "_resolved": "https://registry.npmjs.org/generic-pool/-/generic-pool-2.5.4.tgz",
  "_shasum": "38c6188513e14030948ec6e5cf65523d9779299b",
  "_shrinkwrap": null,
  "_spec": "generic-pool@^2.4.2",
  "_where": "/root/.nvm/versions/node/v7.10.0/lib/node_modules/shadowsocks-manager/node_modules/knex",
  "author": {
    "name": "James Cooper",
    "email": "james@bitmechanic.com"
  },
  "bugs": {
    "url": "https://github.com/coopernurse/node-pool/issues"
  },
  "contributors": [
    {
      "name": "James Cooper",
      "email": "james@bitmechanic.com"
    },
    {
      "name": "Peter Galiba",
      "email": "poetro@poetro.hu",
      "url": "http://poetro.hu/"
    },
    {
      "name": "Gary Dusbabek"
    },
    {
      "name": "Tom MacWright",
      "url": "http://www.developmentseed.org/"
    },
    {
      "name": "Douglas Christopher Wilson",
      "email": "doug@somethingdoug.com",
      "url": "http://somethingdoug.com/"
    },
    {
      "name": "calibr"
    },
    {
      "name": "Justin Robinson",
      "email": "jrobinson@redventures.com"
    },
    {
      "name": "Nayana Hettiarachchi",
      "email": "nayana@corp-gems.com"
    },
    {
      "name": "Felipe Machado",
      "email": "felipou@gmail.com"
    },
    {
      "name": "Felix Becker",
      "email": "felix.b@outlook.com"
    },
    {
      "name": "sandfox",
      "email": "james.butler@sandfox.co.uk"
    },
    {
      "name": "Lewis J Ellis",
      "email": "me@lewisjellis.com"
    }
  ],
  "dependencies": {},
  "description": "Generic resource pooling for Node.JS",
  "devDependencies": {
    "tap": "^5.7.1"
  },
  "directories": {},
  "dist": {
    "shasum": "38c6188513e14030948ec6e5cf65523d9779299b",
    "tarball": "https://registry.npmjs.org/generic-pool/-/generic-pool-2.5.4.tgz"
  },
  "engines": {
    "node": ">= 0.8.0"
  },
  "gitHead": "6c98fa9163bbe35b683ffc2b55ac741d02956096",
  "homepage": "https://github.com/coopernurse/node-pool#readme",
  "keywords": [
    "pool",
    "pooling",
    "throttle"
  ],
  "license": "MIT",
  "main": "lib/generic-pool.js",
  "maintainers": [
    {
      "name": "coopernurse",
      "email": "james@bitmechanic.com"
    },
    {
      "name": "sandfox",
      "email": "james.butler@sandfox.co.uk"
    }
  ],
  "name": "generic-pool",
  "optionalDependencies": {},
  "publishConfig": {
    "tag": "2.5.x"
  },
  "readme": "[![Build Status](https://travis-ci.org/coopernurse/node-pool.svg?branch=v2.4)](https://travis-ci.org/coopernurse/node-pool)\n\n# About\n\n  Generic resource pool.  Can be used to reuse or throttle expensive resources such as\n  database connections.\n\n  This is the legacy [v2.5 branch](https://github.com/coopernurse/node-pool/tree/v2.5). If possible it's recommended yo upgrade to the version 3 of generic pool as it's most likely that this branch will only be recieving bug fixes. Minor version upgrades are unlikely at this point.\n\n## Installation\n\n    $ npm install generic-pool@2.5\n\n## History\n\nThe history has been moved to the [CHANGELOG](CHANGELOG.md)\n\n## Example\n\n### Step 1 - Create pool using a factory object\n\n```js\n// Create a MySQL connection pool with\n// a max of 10 connections, a min of 2, and a 30 second max idle time\nvar Pool = require('generic-pool').Pool;\nvar mysql = require('mysql'); // v2.10.x\n\nvar pool = new Pool({\n    name     : 'mysql',\n    create   : function(callback) {\n        var c = mysql.createConnection({\n                user: 'scott',\n                password: 'tiger',\n                database:'mydb'\n        })\n\n        // parameter order: err, resource\n        callback(null, c);\n    },\n    destroy  : function(client) { client.end(); },\n    max      : 10,\n    // optional. if you set this, make sure to drain() (see step 3)\n    min      : 2,\n    // specifies how long a resource can stay idle in pool before being removed\n    idleTimeoutMillis : 30000,\n     // if true, logs via console.log - can also be a function\n    log : true\n});\n```\n\n### Step 2 - Use pool in your code to acquire/release resources\n\n```js\n// acquire connection - callback function is called\n// once a resource becomes available\npool.acquire(function(err, client) {\n    if (err) {\n        // handle error - this is generally the err from your\n        // factory.create function\n    }\n    else {\n        client.query(\"select * from foo\", [], function() {\n            // return object back to pool\n            pool.release(client);\n        });\n    }\n});\n```\n\n### Step 3 - Drain pool during shutdown (optional)\n\nIf you are shutting down a long-lived process, you may notice\nthat node fails to exit for 30 seconds or so.  This is a side\neffect of the idleTimeoutMillis behavior -- the pool has a\nsetTimeout() call registered that is in the event loop queue, so\nnode won't terminate until all resources have timed out, and the pool\nstops trying to manage them.\n\nThis behavior will be more problematic when you set factory.min > 0,\nas the pool will never become empty, and the setTimeout calls will\nnever end.\n\nIn these cases, use the pool.drain() function.  This sets the pool\ninto a \"draining\" state which will gracefully wait until all\nidle resources have timed out.  For example, you can call:\n\n```js\n// Only call this once in your application -- at the point you want\n// to shutdown and stop using this pool.\npool.drain(function() {\n    pool.destroyAllNow();\n});\n```\n\nIf you do this, your node process will exit gracefully.\n\n\n## Documentation\n\n    Pool() accepts an object with these slots:\n\n                  name : name of pool (string, optional)\n                create : function that returns a new resource\n                           should call callback() with the created resource\n               destroy : function that accepts a resource and destroys it\n                   max : maximum number of resources to create at any given time\n                         optional (default=1)\n                   min : minimum number of resources to keep in pool at any given time\n                         if this is set >= max, the pool will silently set the min\n                         to factory.max - 1 (Note: min==max case is expected to change in v3 release)\n                         optional (default=0)\n           refreshIdle : boolean that specifies whether idle resources at or below the min threshold\n                         should be destroyed/re-created.  optional (default=true)\n     idleTimeoutMillis : max milliseconds a resource can go unused before it should be destroyed\n                         (default 30000)\n    reapIntervalMillis : frequency to check for idle resources (default 1000),\n          returnToHead : boolean, if true the most recently released resources will be the first to be allocated.\n                         This in effect turns the pool's behaviour from a queue into a stack. optional (default false)\n         priorityRange : int between 1 and x - if set, borrowers can specify their\n                         relative priority in the queue if no resources are available.\n                         see example.  (default 1)\n              validate : function that accepts a pooled resource and returns true if the resource\n                         is OK to use, or false if the object is invalid.  Invalid objects will be destroyed.\n                         This function is called in acquire() before returning a resource from the pool.\n                         Optional.  Default function always returns true.\n         validateAsync : Asynchronous validate function. Receives a callback function as its second argument,\n                         which should be called with a single boolean argument being true if the item is still\n                         valid and false if it should be removed from the pool. Called before item is acquired\n                         from pool. Default is undefined. Only one of validate/validateAsync may be specified\n                   log : true/false or function -\n                           If a log is a function, it will be called with two parameters:\n                                                    - log string\n                                                    - log level ('verbose', 'info', 'warn', 'error')\n                           Else if log is true, verbose log info will be sent to console.log()\n                           Else internal log messages be ignored (this is the default)\n\n## Priority Queueing\n\nThe pool now supports optional priority queueing.  This becomes relevant when no resources\nare available and the caller has to wait. `acquire()` accepts an optional priority int which\nspecifies the caller's relative position in the queue.\n\n```js\n // create pool with priorityRange of 3\n // borrowers can specify a priority 0 to 2\n var pool = new Pool({\n     name     : 'mysql',\n     create   : function(callback) {\n         // do something\n     },\n     destroy  : function(client) {\n         // cleanup.  omitted for this example\n     },\n     max      : 10,\n     idleTimeoutMillis : 30000,\n     priorityRange : 3\n });\n\n // acquire connection - no priority - will go at front of line (same as high priority)\n pool.acquire(function(err, client) {\n     pool.release(client);\n });\n\n // acquire connection - high priority - will go into front slot\n pool.acquire(function(err, client) {\n     pool.release(client);\n }, 0);\n\n // acquire connection - medium priority - will go into middle slot\n pool.acquire(function(err, client) {\n     pool.release(client);\n }, 1);\n\n // etc..\n```\n\n## Draining\n\nIf you know would like to terminate all the resources in your pool before\ntheir timeouts have been reached, you can use `destroyAllNow()` in conjunction\nwith `drain()`:\n\n```js\npool.drain(function() {\n    pool.destroyAllNow();\n});\n```\n\nOne side-effect of calling `drain()` is that subsequent calls to `acquire()`\nwill throw an Error.\n\n## Pooled function decoration\n\nTo transparently handle object acquisition for a function,\none can use `pooled()`:\n\n```js\nvar privateFn, publicFn;\npublicFn = pool.pooled(privateFn = function(client, arg, cb) {\n    // Do something with the client and arg. Client is auto-released when cb is called\n    cb(null, arg);\n});\n```\n\nKeeping both private and public versions of each function allows for pooled\nfunctions to call other pooled functions with the same member. This is a handy\npattern for database transactions:\n\n```js\nvar privateTop, privateBottom, publicTop, publicBottom;\npublicBottom = pool.pooled(privateBottom = function(client, arg, cb) {\n    //Use client, assumed auto-release\n});\n\npublicTop = pool.pooled(privateTop = function(client, cb) {\n    // e.g., open a database transaction\n    privateBottom(client, \"arg\", function(err, retVal) {\n        if(err) { return cb(err); }\n        // e.g., close a transaction\n        cb();\n    });\n});\n```\n\n## Pool info\n\nThe following functions will let you get information about the pool:\n\n```js\n// returns factory.name for this pool\npool.getName()\n\n// returns number of resources in the pool regardless of\n// whether they are free or in use\npool.getPoolSize()\n\n// returns number of unused resources in the pool\npool.availableObjectsCount()\n\n// returns number of callers waiting to acquire a resource\npool.waitingClientsCount()\n\n// returns number of maxixmum number of resources allowed by ppol\npool.getMaxPoolSize()\n\n// returns number of minimum number of resources allowed by ppol\npool.getMinPoolSize()\n\n```\n\n## Run Tests\n\n    $ npm install\n    $ npm test\n\nThe tests are run/written using Tap. Most are ports from the old espresso tests and are not in great condition.\n\n## Linting\n\nWe use eslint and the `standard` ruleset. At the moment linting is not done as part of the test suite but this will probably change in the future. You should ideally lint your code before making any PR's patches etc.\n\nBecuase the linting tools require nodejs >= `0.10` but we test against `0.8` installation of the tools is done via `npm run lint-install`.\n\n    $ npm run lint-install\n    $ npm run lint\n\n\n## License\n\n(The MIT License)\n\nCopyright (c) 2010-2016 James Cooper &lt;james@bitmechanic.com&gt;\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+ssh://git@github.com/coopernurse/node-pool.git"
  },
  "scripts": {
    "lint": "eslint lib test",
    "lint-install": "npm install eslint@^1.10.2 eslint-config-standard@^4.4.0 eslint-plugin-standard@^1.3.1",
    "test": "tap test/*-test.js"
  },
  "version": "2.5.4"
}
